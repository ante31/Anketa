<!DOCTYPE html>
<html lang="hr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <title>Profesionalna Anketa</title>

  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    .fade {
      animation: fade 0.4s ease forwards;
      opacity: 0;
    }
    @keyframes fade {
      to { opacity: 1; }
    }
    /* Stil za traku klizača */
    #comfortSlider::-webkit-slider-runnable-track {
      background: none;
    }
    #comfortSlider::-moz-range-track {
      background: none;
    }
    /* Prilagodba izgleda ručke klizača za bolju vidljivost */
    #comfortSlider::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      width: 24px;
      height: 24px;
      border-radius: 50%;
      background: #ffffff;
      cursor: pointer;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
      border: 3px solid #6366f1;
      margin-top: -10.5px;
    }
    #comfortSlider::-moz-range-thumb {
      width: 20px;
      height: 20px;
      border-radius: 50%;
      background: #ffffff;
      cursor: pointer;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
      border: 3px solid #6366f1;
    }
  </style>
</head>

<body class="bg-gradient-to-br from-gray-900 via-slate-900 to-black min-h-screen flex items-center justify-center p-5">

  <div class="w-full max-w-xl p-8 bg-white/10 backdrop-blur-2xl border border-white/10 rounded-3xl shadow-[0_0_40px_rgba(0,0,0,0.6)] fade">

    <div class="mb-8">
      <div class="flex justify-between items-center mb-1 text-sm text-white/80">
        <span id="progressText">1 / 9</span>
      </div>
      <div class="w-full h-2 bg-white/20 rounded-full overflow-hidden">
        <div id="progressBar"
             class="h-full bg-indigo-500 transition-all duration-500 ease-out"
             style="width: 11%;">
        </div>
      </div>
    </div>


    <form id="page1" data-step="1" class="space-y-7 text-white fade">
        <h2 class="text-xl font-semibold mb-4 text-center">I. OPĆE INFORMACIJE</h2>
        
        <div>
            <label class="block mb-2">1. Spol:</label>
            <div class="flex gap-4">
                <label><input type="radio" name="Spol" value="Muški" required /> Muški</label>
                <label><input type="radio" name="Spol" value="Ženski" required /> Ženski</label>
                <label><input type="radio" name="Spol" value="Drugo" required /> Drugo</label>
            </div>
        </div>
        
        <div>
            <label class="block mb-2">2. Dob:</label>
            <input type="number" name="Dob" required class="w-full p-3 rounded-xl bg-white/10 border border-white/20" />
        </div>
        
        <div>
            <label class="block mb-2">3. U kojoj državi trenirate?</label>
            <input type="text" name="Država" required class="w-full p-3 rounded-xl bg-white/10 border border-white/20" />
        </div>
        
        <div>
            <label class="block mb-2">4. U kojem gradu trenirate?</label>
            <input type="text" name="Grad" required class="w-full p-3 rounded-xl bg-white/10 border border-white/20" />
        </div>
        
        <div>
            <label class="block mb-2">5. Kojim kontaktnim sportom se bavite?</label>
            <div class="grid grid-cols-2 gap-2">
                <label><input type="radio" name="Sport" value="Boks" required /> Boks</label>
                <label><input type="radio" name="Sport" value="Kickboxing" required /> Kickboxing</label>
                <label><input type="radio" name="Sport" value="MMA" required /> MMA</label>
                <label><input type="radio" name="Sport" value="Ragbi" required /> Ragbi</label>
                <label><input type="radio" name="Sport" value="Hokej" required /> Hokej</label>
                <label><input type="radio" name="Sport" value="Karate" required /> Karate</label>
                <label><input type="radio" name="Sport" value="Taekwondo" required /> Taekwondo</label>
                <label><input type="radio" name="Sport" value="Hrvanje" required /> Hrvanje</label>
            </div>
            <input type="text" placeholder="Drugo..." name="SportDrugo" class="w-full mt-2 p-3 rounded-xl bg-white/10 border border-white/20" />
        </div>
        
        <div>
            <label class="block mb-2">6. Koliko dugo se bavite ovim sportom?</label>
            <select name="Iskustvo" required class="w-full p-3 rounded-xl bg-white/10 border border-white/20">
                <option value="" disabled selected>Odaberite...</option>
                <option>Manje od 1 godine</option>
                <option>1-3 godine</option>
                <option>3-5 godina</option>
                <option>Više od 5 godina</option>
            </select>
        </div>
        
        <div>
            <label class="block mb-2">7. Koliko često trenirate?</label>
            <select name="Učestalost" required class="w-full p-3 rounded-xl bg-white/10 border border-white/20">
                <option value="" disabled selected>Odaberite...</option>
                <option>Manje od 2 puta tjedno</option>
                <option>2-4 puta tjedno</option>
                <option>5 i više puta tjedno</option>
            </select>
        </div>
        
        <button type="button" data-next-step="2" class="next-btn w-full py-3 rounded-xl font-semibold text-lg bg-indigo-600 hover:bg-indigo-700 shadow-lg">
            Dalje →
        </button>
    </form>

    <form id="page2" data-step="2" class="space-y-7 text-white hidden fade">

  <h2 class="text-xl font-semibold mb-4 text-center">II. ISKUSTVO S KORIŠTENJEM SPORTSKIH UDLAGA</h2>

  <div id="q2_koristenje">
    <label class="block mb-2">1. Koristite li sportsku udlagu?</label>
    <div class="flex gap-4">
      <label><input type="radio" name="KoristenjeUdlage" value="Da" required /> Da</label>
      <label><input type="radio" name="KoristenjeUdlage" value="Ne" required /> Ne</label>
    </div>
  </div>

  <div id="q2_razlog_ne" class="hidden">
    <label class="block mb-2">2. Ako ne, zašto ne koristite sportsku udlagu?</label>
    <div class="grid grid-cols-1 gap-2">
      <label><input type="checkbox" name="RazlogNekoristenja" value="Nije potrebna" /> Nije mi potrebna</label>
      <label><input type="checkbox" name="RazlogNekoristenja" value="Nije udobna" /> Nije udobna</label>
      <label><input type="checkbox" name="RazlogNekoristenja" value="Preskupa" /> Preskupa je</label>
      <label><input type="checkbox" name="RazlogNekoristenja" value="Nisam znao" /> Nisam znao/la da trebam</label>
      <label><input type="checkbox" name="RazlogNekoristenja" value="Estetski razlozi" /> Iz estetskih razloga</label>
    </div>
  </div>

  <div id="q2_da_group" class="space-y-7">
    <div>
      <label class="block mb-2">3. Ako koristite sportsku udlagu, koju vrstu koristite?</label>
      <div class="grid grid-cols-1 gap-2">
        <label><input type="radio" name="VrstaUdlage" value="Konfekcijska" /> Konfekcijsku</label>
        <label><input type="radio" name="VrstaUdlage" value="Poluprilagodljiva" /> Poluprilagodljivi dentalni štitnik (boil and bite)</label>
        <label><input type="radio" name="VrstaUdlage" value="Individualna" /> Individualnu</label>
      </div>
    </div>

    <div>
      <label class="block mb-2">4. Koliko često koristite sportsku udlagu tijekom treninga?</label>
      <select name="KorištenjeTrening" class="w-full p-3 rounded-xl bg-white/10 border border-white/20">
        <option value="" disabled selected>Odaberite...</option>
        <option>Uvijek</option>
        <option>Ponekad</option>
        <option>Nikad</option>
      </select>
    </div>
  
    <div>
      <label class="block mb-2">5. Koliko često koristite sportsku udlagu tijekom natjecanja?</label>
      <select name="KorištenjeNatjecanje" class="w-full p-3 rounded-xl bg-white/10 border border-white/20">
        <option value="" disabled selected>Odaberite...</option>
        <option>Uvijek</option>
        <option>Ponekad</option>
        <option>Nikad</option>
      </select>
    </div>

    <div>
      <label class="block mb-2">6. Gdje ste nabavili svoju udlagu?</label>
      <div class="grid grid-cols-1 gap-2">
        <label><input type="radio" name="NabavaUdlage" value="Sportska trgovina" /> Sportska trgovina</label>
        <label><input type="radio" name="NabavaUdlage" value="Online kupnja" /> Online kupnja</label>
        <label><input type="radio" name="NabavaUdlage" value="Doktor dentalne medicine" /> U doktora dentalne medicine</label>
        <label><input type="radio" name="NabavaUdlage" value="Dobivena od kluba" /> Dobio/la od kluba / trenera</label>
      </div>
    </div>
  </div>


  <button type="button" data-next-step="3" id="page2_next_btn" class="next-btn w-full mt-6 py-3 rounded-xl font-semibold text-lg bg-indigo-600 hover:bg-indigo-700 shadow-lg">
    Dalje →
  </button>

</form>
    
    <form id="page3" data-step="3" class="hidden space-y-7 text-white fade">
        <h2 class="text-xl font-semibold mb-4 text-center">III. UDOBNOST I PRILAGODBA</h2>
        <div class="space-y-7">
            <div class="flex flex-col gap-3 relative">
                <label class="text-sm font-medium opacity-90">
                    1. Kako biste ocijenili udobnost svoje udlage (VAS ljestvica)?
                </label>
                <div class="relative pt-3 pb-6">
                    <div class="absolute left-0 right-0 top-1/2 -translate-y-1/2 h-10 bg-gradient-to-r from-red-500/40 via-yellow-400/40 to-green-500/40 blur-xl rounded-full opacity-60 pointer-events-none"></div>
                    <input type="range" min="0" max="100" value="50" name="VAS Udobnost" id="comfortSlider" required class="w-full h-3 rounded-full appearance-none cursor-pointer relative z-10 bg-gradient-to-r from-red-400 via-yellow-300 to-green-400 shadow-[inset_0_0_10px_rgba(0,0,0,0.7),0_4px_14px_rgba(0,0,0,0.8)] border border-white/20">
                </div>
                <p class="text-sm opacity-80">
                    Vrijednost: <span id="comfortValue" class="font-semibold">50</span>/100
                </p>
            </div>
            
            <div>
                <label class="block mb-2">2. Imate li osjećaj nelagode ili pritiska u ustima dok nosite udlagu?</label>
                <label><input type="radio" name="Nelagoda" value="Da" required /> Da</label><br>
                <label><input type="radio" name="Nelagoda" value="Ne" required /> Ne</label>
            </div>
            
            <div>
                <label class="block mb-2">3. Možete li normalno disati dok nosite udlagu?</label>
                <label><input type="radio" name="Disanje" value="Da" required /> Da</label><br>
                <label><input type="radio" name="Disanje" value="Ne" required /> Ne</label>
            </div>
            
            <div>
                <label class="block mb-2">4. Možete li normalno govoriti dok nosite udlagu?</label>
                <label><input type="radio" name="Govor" value="Da" required /> Da</label><br>
                <label><input type="radio" name="Govor" value="Ne" required /> Ne</label>
            </div>
        </div>
        
        <button type="button" data-next-step="4" class="next-btn w-full mt-6 py-3 rounded-xl font-semibold text-lg bg-indigo-600 hover:bg-indigo-700 shadow-lg">
            Dalje →
        </button>
    </form>

    <form id="page4" data-step="4" class="hidden space-y-7 text-white fade">

      <h2 class="text-xl font-semibold mb-4 text-center">IV. ZAŠTITA I FUNKCIONALNOST</h2>

      <div>
        <label class="block mb-2">1. Smatrate li da vam udlaga pruža dovoljnu zaštitu od ozljeda?</label>
        <div class="flex gap-4">
          <label><input type="radio" name="ZaštitaDovoljna" value="Da" required /> Da</label>
          <label><input type="radio" name="ZaštitaDovoljna" value="Ne" required /> Ne</label>
        </div>
      </div>

      <div id="q4_ozljeda">
        <label class="block mb-2">2. Jeste li ikada pretrpjeli ozljedu zuba, usana ili čeljusti tijekom sporta?</label>
        <div class="flex gap-4">
          <label><input type="radio" name="PretrpioOzljedu" value="Da" required /> Da</label>
          <label><input type="radio" name="PretrpioOzljedu" value="Ne" required /> Ne</label>
        </div>
      </div>

      <div id="q4_vrsta_ozljede" class="hidden">
        <label class="block mb-2">3. Ako da, koja vrsta ozljede?</label>
        <div class="grid grid-cols-2 gap-2">
          <label><input type="checkbox" name="VrstaOzljede" value="Puknuće zuba" /> Puknuće zuba</label>
          <label><input type="checkbox" name="VrstaOzljede" value="Avulzija" /> Avulzija (zub je ispao, izgubili ste zub)</label>
          <label><input type="checkbox" name="VrstaOzljede" value="Ugriz jezika/obraza" /> Ugriz jezika i obraza</label>
          <label><input type="checkbox" name="VrstaOzljede" value="Ozljeda čeljusti" /> Ozljeda čeljusti</label>
          <label><input type="checkbox" name="VrstaOzljede" value="Ozljede čeljusnog zgloba" /> Ozljede čeljusnog zgloba</label>
        </div>
        <input type="text" placeholder="Drugo..."
               name="VrstaOzljedeDrugo"
               class="w-full mt-2 p-3 rounded-xl bg-white/10 border border-white/20" />
      </div>

      <div>
        <label class="block mb-2">4. Jeste li ikada pretrpjeli ozljedu dok ste nosili sportsku udlagu?</label>
        <div class="flex gap-4">
          <label><input type="radio" name="OzljedaS_Udlagom" value="Da" required /> Da</label>
          <label><input type="radio" name="OzljedaS_Udlagom" value="Ne" required /> Ne</label>
        </div>
      </div>

      <div>
        <label class="block mb-2">5. Osjećate li se sigurnije kada nosite sportsku udlagu?</label>
        <div class="flex gap-4">
          <label><input type="radio" name="OsjećajSigurnosti" value="Da" required /> Da</label>
          <label><input type="radio" name="OsjećajSigurnosti" value="Ne" required /> Ne</label>
        </div>
      </div>

      <button type="button" data-next-step="5" class="next-btn w-full mt-6 py-3 rounded-xl font-semibold text-lg bg-indigo-600 hover:bg-indigo-700 shadow-lg">
        Dalje →
      </button>

    </form>

    <form id="page5" data-step="5" class="hidden space-y-7 text-white fade">

      <h2 class="text-xl font-semibold mb-4 text-center">V. USPOREDBA KONFEKCIJSKIH I INDIVIDUALNIH UDLAGA</h2>

      <div id="q5_koristili_obje">
        <label class="block mb-2">1. Ako ste koristili obje vrste, koja vam je udobnija?</label>
        <div class="flex gap-4">
          <label><input type="radio" name="UdobnijaVrsta" value="Individualna" required /> Individualna</label>
          <label><input type="radio" name="UdobnijaVrsta" value="Konfekcijska" required /> Konfekcijska</label>
        </div>
      </div>
      
      <div id="q5_usporedba_detalji" class="space-y-7">
        <div>
            <label class="block mb-2">2. Koja vam omogućava lakše disanje?</label>
            <div class="flex gap-4">
                <label><input type="radio" name="LakšeDisanje" value="Individualna" required /> Individualna</label>
                <label><input type="radio" name="LakšeDisanje" value="Konfekcijska" required /> Konfekcijska</label>
            </div>
        </div>

        <div>
            <label class="block mb-2">3. Koja bolje odgovara vašim zubima?</label>
            <div class="flex gap-4">
                <label><input type="radio" name="BoljeOdgovara" value="Individualna" required /> Individualna</label>
                <label><input type="radio" name="BoljeOdgovara" value="Konfekcijska" required /> Konfekcijska</label>
            </div>
        </div>

        <div>
            <label class="block mb-2">4. Smatrate li da individualna udlaga opravdava višu cijenu?</label>
            <div class="flex gap-4">
                <label><input type="radio" name="IndividualnaOpravdavaCijenu" value="Da" required /> Da</label>
                <label><input type="radio" name="IndividualnaOpravdavaCijenu" value="Ne" required /> Ne</label>
            </div>
        </div>

        <div>
            <label class="block mb-2">5. Koju biste preporučili drugima?</label>
            <div class="flex gap-4">
                <label><input type="radio" name="PreporukaVrste" value="Individualna" required /> Individualnu</label>
                <label><input type="radio" name="PreporukaVrste" value="Konfekcijska" required /> Konfekcijsku</label>
            </div>
        </div>
      </div>
      
      <div>
        <label class="block mb-2">6. Što je utjecalo na odabir vrste udlage?</label>
        <div class="grid grid-cols-2 gap-2">
          <label><input type="checkbox" name="UtjecajOdabirUdlage" value="Cijena" /> Cijena</label>
          <label><input type="checkbox" name="UtjecajOdabirUdlage" value="Pristupačnost" /> Pristupačnost</label>
          <label><input type="checkbox" name="UtjecajOdabirUdlage" value="Preporuka suigrača" /> Preporuka suigrača</label>
          <label><input type="checkbox" name="UtjecajOdabirUdlage" value="Preporuka trenera" /> Preporuka trenera</label>
        </div>
      </div>

      <div>
        <label class="block mb-2">7. Koristite li neku dodatnu zaštitnu opremu za zube ili čeljust?</label>
        <div class="grid grid-cols-2 gap-2">
          <label><input type="radio" name="DodatnaZastita" value="Ne" required /> Ne</label>
          <label><input type="radio" name="DodatnaZastita" value="Štitnik za bradu" required /> Štitnik za bradu</label>
          <label><input type="radio" name="DodatnaZastita" value="Kaciga za zaštitu za čeljust" required /> Kacigu za zaštitu za čeljust</label>
        </div>
      </div>

      <button type="button" data-next-step="6" class="next-btn w-full mt-6 py-3 rounded-xl font-semibold text-lg bg-indigo-600 hover:bg-indigo-700 shadow-lg">
        Dalje →
      </button>

    </form>

    <form id="page6" data-step="6" class="hidden space-y-7 text-white fade">

      <h2 class="text-xl font-semibold mb-4 text-center">VI. ODRŽAVANJE I HIGIJENA</h2>

      <div>
        <label class="block mb-2">1. Koliko često čistite svoju sportsku udlagu?</label>
        <div class="grid grid-cols-2 gap-2">
          <label><input type="radio" name="UčestalostČišćenja" value="Nakon svakog korištenja" required /> Nakon svakog korištenja</label>
          <label><input type="radio" name="UčestalostČišćenja" value="Nekoliko puta tjedno" required /> Nekoliko puta tjedno</label>
          <label><input type="radio" name="UčestalostČišćenja" value="Jednom tjedno" required /> Jednom tjedno</label>
          <label><input type="radio" name="UčestalostČišćenja" value="Ne perem" required /> Ne perem</label>
        </div>
      </div>

      <div>
        <label class="block mb-2">2. Kako je najčešće čistite?</label>
        <div class="grid grid-cols-2 gap-2">
          <label><input type="radio" name="NačinČišćenja" value="Vodom" required /> Vodom</label>
          <label><input type="radio" name="NačinČišćenja" value="Četkicom i pastom za zube" required /> Četkicom i pastom za zube</label>
          <label><input type="radio" name="NačinČišćenja" value="Specijalnim otopinama" required /> Specijalnim otopinama</label>
          <label><input type="radio" name="NačinČišćenja" value="Ne čistim" required /> Ne čistim</label>
        </div>
      </div>

      <div>
        <label class="block mb-2">3. Jeste li primijetili neugodan miris na udlazi?</label>
        <div class="flex gap-4">
          <label><input type="radio" name="NeugodanMiris" value="Da" required /> Da</label>
          <label><input type="radio" name="NeugodanMiris" value="Ne" required /> Ne</label>
        </div>
      </div>

      <div>
        <label class="block mb-2">4. Jeste li primijetili promjenu boje udlage?</label>
        <div class="flex gap-4">
          <label><input type="radio" name="PromjenaBoje" value="Da" required /> Da</label>
          <label><input type="radio" name="PromjenaBoje" value="Ne" required /> Ne</label>
        </div>
      </div>

      <div>
        <label class="block mb-2">5. Koliko dugo vam u prosjeku traje jedna udlaga prije nego što je zamijenite?</label>
        <select name="TrajanjeUdlage" required class="w-full p-3 rounded-xl bg-white/10 border border-white/20">
          <option value="" disabled selected>Odaberite...</option>
          <option>Manje od 3 mjeseca</option>
          <option>3-6 mjeseci</option>
          <option>6-12 mjeseci</option>
          <option>Više od godinu dana</option>
        </select>
      </div>

      <button type="button" data-next-step="7" class="next-btn w-full mt-6 py-3 rounded-xl font-semibold text-lg bg-indigo-600 hover:bg-indigo-700 shadow-lg">
        Dalje →
      </button>

    </form>

    <form id="page7" data-step="7" class="hidden space-y-7 text-white fade">

      <h2 class="text-xl font-semibold mb-4 text-center">VII. UTJECAJ NA SPORTSKU IZVEDBU</h2>

      <div>
        <label class="block mb-2">1. Smatrate li da vam udlaga smanjuje sportsku izvedbu?</label>
        <div class="flex gap-4">
          <label><input type="radio" name="SmanjujeIzvedbu" value="Da" required /> Da</label>
          <label><input type="radio" name="SmanjujeIzvedbu" value="Ne" required /> Ne</label>
        </div>
      </div>

      <div>
        <label class="block mb-2">2. Izaziva li vam udlaga refleks na povraćanja?</label>
        <div class="flex gap-4">
          <label><input type="radio" name="RefleksPovraćanja" value="Da" required /> Da</label>
          <label><input type="radio" name="RefleksPovraćanja" value="Ne" required /> Ne</label>
        </div>
      </div>

      <div>
        <label class="block mb-2">3. Osjećate li umor u čeljusti nakon nošenja udlage?</label>
        <div class="flex gap-4">
          <label><input type="radio" name="UmorČeljusti" value="Da" required /> Da</label>
          <label><input type="radio" name="UmorČeljusti" value="Ne" required /> Ne</label>
        </div>
      </div>

      <div>
        <label class="block mb-2">4. Otežava li vam udlaga komunikaciju s trenerom/suigračima?</label>
        <div class="flex gap-4">
          <label><input type="radio" name="OtežavaKomunikaciju" value="Da" required /> Da</label>
          <label><input type="radio" name="OtežavaKomunikaciju" value="Ne" required /> Ne</label>
        </div>
      </div>

      <div>
        <label class="block mb-2">5. Jeste li se lako navikli na nošenje udlage?</label>
        <div class="flex gap-4">
          <label><input type="radio" name="LakoNavikavanje" value="Da" required /> Da</label>
          <label><input type="radio" name="LakoNavikavanje" value="Ne" required /> Ne</label>
        </div>
      </div>

      <div id="q7_iritacija">
        <label class="block mb-2">6. Jeste li primijetili iritaciju ili ranice na desnima, jeziku ili obrazima zbog udlage?</label>
        <div class="flex gap-4">
          <label><input type="radio" name="IritacijaRanice" value="Da" required /> Da</label>
          <label><input type="radio" name="IritacijaRanice" value="Ne" required /> Ne</label>
        </div>
      </div>
      
      <div id="q7_komentar_iritacija" class="hidden">
        <label class="block mb-2">7. Možete li ukratko opisati iritaciju?</label>
        <textarea name="KomentarIritacija" class="w-full p-3 rounded-xl bg-white/10 border border-white/20 h-20"></textarea>
      </div>


      <button type="button" data-next-step="8" class="next-btn w-full mt-6 py-3 rounded-xl font-semibold text-lg bg-indigo-600 hover:bg-indigo-700 shadow-lg">
        Dalje →
      </button>

    </form>

    <form id="page8" data-step="8" class="hidden space-y-7 text-white fade">

      <h2 class="text-xl font-semibold mb-4 text-center">VIII. CIJENA I DOSTUPNOST</h2>

      <div id="q8_cijena_udlage">
        <label class="block mb-2">1. Koliko ste platili svoju sportsku udlagu?</label>
        <select name="CijenaUdlage" class="w-full p-3 rounded-xl bg-white/10 border border-white/20">
          <option value="" disabled selected>Odaberite...</option>
          <option>Manje od 10 €</option>
          <option>10-50 €</option>
          <option>50-100 €</option>
          <option>Više od 100 €</option>
        </select>
      </div>

      <div>
        <label class="block mb-2">2. Smatrate li da je cijena udlage opravdana u odnosu na kvalitetu?</label>
        <div class="flex gap-4">
          <label><input type="radio" name="CijenaOpravdana" value="Da" required /> Da</label>
          <label><input type="radio" name="CijenaOpravdana" value="Ne" required /> Ne</label>
        </div>
      </div>
      <div>
        <label class="block mb-2">3. Biste li bili spremni investirati u kvalitetniju udlagu?</label>
        <div class="flex gap-4">
          <label><input type="radio" name="SpremnostInvestiranja" value="Da" required /> Da</label>
          <label><input type="radio" name="SpremnostInvestiranja" value="Ne" required /> Ne</label>
        </div>
      </div>

      <div>
        <label class="block mb-2">4. Jeste li zadovoljni dostupnošću sportskih udlaga na tržištu?</label>
        <div class="flex gap-4">
          <label><input type="radio" name="ZadovoljstvoDostupnošću" value="Da" required /> Da</label>
          <label><input type="radio" name="ZadovoljstvoDostupnošću" value="Ne" required /> Ne</label>
        </div>
      </div>

      <button type="button" data-next-step="9" class="next-btn w-full mt-6 py-3 rounded-xl font-semibold text-lg bg-indigo-600 hover:bg-indigo-700 shadow-lg">
        Dalje →
      </button>

    </form>

    <form id="page9" data-step="9" class="hidden space-y-7 text-white fade">

      <h2 class="text-xl font-semibold mb-4 text-center">IX. INFORMIRANOST I EDUKACIJA</h2>

      <div id="q9_preporuka">
        <label class="block mb-2">1. Od koga ste dobili preporuku za nošenje sportske udlage?</label>
        <div class="grid grid-cols-2 gap-2">
          <label><input type="checkbox" name="Preporuka" value="Trenera" /> Trenera</label>
          <label><input type="checkbox" name="Preporuka" value="Doktora dentalne medicine" /> Doktora dentalne medicine</label>
          <label><input type="checkbox" name="Preporuka" value="Suigrača" /> Suigrača</label>
        </div>
      </div>

      <div>
        <label class="block mb-2">2. Smatrate li da ste dovoljno informirani o važnosti sportskih udlaga?</label>
        <div class="flex gap-4">
          <label><input type="radio" name="Informiranost" value="Da" required /> Da</label>
          <label><input type="radio" name="Informiranost" value="Ne" required /> Ne</label>
        </div>
      </div>

      <div>
        <label class="block mb-2">3. Smatrate li da bi se sportaši trebali educirati o zaštiti zuba i čeljusti?</label>
        <div class="flex gap-4">
          <label><input type="radio" name="EdukacijaSportaša" value="Da" required /> Da</label>
          <label><input type="radio" name="EdukacijaSportaša" value="Ne" required /> Ne</label>
        </div>
      </div>

      <div>
        <label class="block mb-2">4. Smatrate li da bi doktori dentalne medicine trebali aktivnije promovirati korištenje sportskih udlaga?</label>
        <div class="flex gap-4">
          <label><input type="radio" name="PromocijaDoktora" value="Da" required /> Da</label>
          <label><input type="radio" name="PromocijaDoktora" value="Ne" required /> Ne</label>
        </div>
      </div>

      <div>
        <label class="block mb-2">5. Mislite li da bi sportske udlage trebale biti obavezne u svim kontaktnim sportovima?</label>
        <div class="flex gap-4">
          <label><input type="radio" name="ObavezneUdlage" value="Da" required /> Da</label>
          <label><input type="radio" name="ObavezneUdlage" value="Ne" required /> Ne</label>
        </div>
      </div>

      <div>
        <label class="block mb-2">6. Imate li neki dodatni komentar ili prijedlog vezan uz sportske udlage?</label>
        <textarea name="DodatniKomentar" class="w-full p-3 rounded-xl bg-white/10 border border-white/20 h-24" placeholder="Upišite ovdje..."></textarea>
      </div>

      <div id="errorBox" class="mt-4"></div>

      <button type="submit" id="finishBtn" class="w-full mt-6 py-3 rounded-xl font-semibold text-lg bg-indigo-600 hover:bg-indigo-700 shadow-lg">
        Pošalji
      </button>

    </form>

  </div>

  <script>
let answers = {};
const totalSteps = 9;

// Selektori
const nextBtns = document.querySelectorAll('.next-btn');
const progressBar = document.getElementById("progressBar");
const progressText = document.getElementById("progressText");
const comfortSlider = document.getElementById("comfortSlider");
const comfortValue = document.getElementById("comfortValue");


function updateProgress(currentStep) {
  const percentage = Math.round((currentStep / totalSteps) * 100);
  
  progressBar.style.width = `${percentage}%`;
  progressText.textContent = `${currentStep} / ${totalSteps}`;
}

function goToStep(currentStep, nextStep) {
  const currentPage = document.getElementById(`page${currentStep}`);
  if (currentPage) {
    currentPage.classList.add("hidden");
    currentPage.classList.remove("fade");
  }

  const nextPage = document.getElementById(`page${nextStep}`);
  if (nextPage) {
    nextPage.classList.remove("hidden");
    nextPage.classList.add("fade"); 
    
    // Ovdje pokrećemo uvjetnu logiku za tu stranicu
    if (nextStep === 2) handleConditionalPage2();
    if (nextStep === 4) handleConditionalPage4();
    if (nextStep === 5) handleConditionalPage5(); 
    if (nextStep === 7) handleConditionalPage7();
    if (nextStep === 8) handleConditionalPage8(); // NOVO
    if (nextStep === 9) handleConditionalPage9(); // NOVO
  }

  updateProgress(nextStep);
  document.body.scrollTo(0, 0); 
}

// Funkcija za postavljanje/uklanjanje 'required' atributa za cijeli kontejner
function toggleRequired(container, isRequired) {
    container.querySelectorAll('input, select, textarea').forEach(element => {
        // Preskače elemente koji su isključeni (disabled)
        if (element.hasAttribute('disabled')) return;
        
        // Postavi obaveznost
        element.required = isRequired;

        // Ako nije obavezno, resetiraj vrijednost i očisti odgovore
        if (!isRequired) {
            if (element.type === 'radio' || element.type === 'checkbox') {
                element.checked = false;
            } else if (element.tagName === 'SELECT') {
                // Vrati na prvu opciju (koja bi trebala biti disabled selected)
                if (element.options.length > 0) element.value = element.options[0].value;
            } else if (element.tagName === 'TEXTAREA' || element.type === 'text' || element.type === 'number') {
                element.value = '';
            }
            // Ukloni polje iz 'answers' objekta
            delete answers[element.name];
        }
    });
}

// ----------------------------------------------------------------------
// UVJETNA LOGIKA ZA STRANICU 2 (KORIŠTENJE UDLAGE I OBRNUTA LOGIKA)
// ----------------------------------------------------------------------
function handleConditionalPage2() {
    const q1Radio = document.querySelectorAll('input[name="KoristenjeUdlage"]');
    const q2RazlogNe = document.getElementById('q2_razlog_ne');
    const q3q6Da = document.getElementById('q2_da_group'); 
    const nextButton = document.getElementById('page2_next_btn');
    
    const updateVisibility = () => {
        const selectedValue = document.querySelector('input[name="KoristenjeUdlage"]:checked')?.value;
        
        if (selectedValue === 'Da') {
            // ODGOVOR: Da
            q3q6Da.classList.remove('hidden');
            toggleRequired(q3q6Da, true); // Polja postaju obavezna
            
            q2RazlogNe.classList.add('hidden');
            toggleRequired(q2RazlogNe, false);

            nextButton.dataset.nextStep = "3";
            
        } else if (selectedValue === 'Ne') {
            // ODGOVOR: Ne
            q3q6Da.classList.add('hidden');
            toggleRequired(q3q6Da, false);

            q2RazlogNe.classList.remove('hidden');
            toggleRequired(q2RazlogNe, false); 

            nextButton.dataset.nextStep = "4"; // Ide na S4 (Preskače S3)

        } else {
            // INICIJALNI ULAZ NA STRANICU (Obrnut prikaz: vidljivo, ali nije obavezno)
            q3q6Da.classList.remove('hidden');
            toggleRequired(q3q6Da, false); 

            q2RazlogNe.classList.add('hidden');
            toggleRequired(q2RazlogNe, false);

            nextButton.dataset.nextStep = "3"; 
        }
    };

    q1Radio.forEach(radio => radio.removeEventListener('change', updateVisibility)); 
    q1Radio.forEach(radio => radio.addEventListener('change', updateVisibility));
    
    updateVisibility();
}

// ----------------------------------------------------------------------
// UVJETNA LOGIKA ZA STRANICU 4 (OZLJEDA)
// ----------------------------------------------------------------------
function handleConditionalPage4() {
    const q2Radio = document.querySelectorAll('input[name="PretrpioOzljedu"]');
    const q3VrstaOzljede = document.getElementById('q4_vrsta_ozljede');
    
    const updateVisibility = () => {
        const selectedValue = document.querySelector('input[name="PretrpioOzljedu"]:checked')?.value;
        
        if (selectedValue === 'Da') {
            q3VrstaOzljede.classList.remove('hidden');
        } else {
            q3VrstaOzljede.classList.add('hidden');
            toggleRequired(q3VrstaOzljede, false);
        }
    };

    q2Radio.forEach(radio => radio.removeEventListener('change', updateVisibility));
    q2Radio.forEach(radio => radio.addEventListener('change', updateVisibility));
    
    updateVisibility();
}

// ----------------------------------------------------------------------
// UVJETNA LOGIKA ZA STRANICU 5 (USPOREDBA)
// ----------------------------------------------------------------------
function handleConditionalPage5() {
    const koristiUdlagu = answers['KoristenjeUdlage'] === 'Da';
    const usporedbaDetalji = document.getElementById('q5_usporedba_detalji');
    const q5KoristiliObje = document.getElementById('q5_koristili_obje');
    
    if (!koristiUdlagu) {
        q5KoristiliObje.classList.add('hidden');
        toggleRequired(q5KoristiliObje, false);
        
        usporedbaDetalji.classList.add('hidden');
        toggleRequired(usporedbaDetalji, false); 
        
    } else {
        q5KoristiliObje.classList.remove('hidden');
        toggleRequired(q5KoristiliObje, true);
        
        usporedbaDetalji.classList.remove('hidden');
        toggleRequired(usporedbaDetalji, true);
    }
}

// ----------------------------------------------------------------------
// UVJETNA LOGIKA ZA STRANICU 7 (IRITACIJA)
// ----------------------------------------------------------------------
function handleConditionalPage7() {
    const q6Radio = document.querySelectorAll('input[name="IritacijaRanice"]');
    const q7Komentar = document.getElementById('q7_komentar_iritacija');
    
    const updateVisibility = () => {
        const selectedValue = document.querySelector('input[name="IritacijaRanice"]:checked')?.value;
        
        if (selectedValue === 'Da') {
            q7Komentar.classList.remove('hidden');
            q7Komentar.querySelector('textarea').required = true;
            
        } else {
            q7Komentar.classList.add('hidden');
            toggleRequired(q7Komentar, false);
        }
    };

    q6Radio.forEach(radio => radio.removeEventListener('change', updateVisibility));
    q6Radio.forEach(radio => radio.addEventListener('change', updateVisibility));
    
    updateVisibility();
}

// ----------------------------------------------------------------------
// UVJETNA LOGIKA ZA STRANICU 8 (CIJENA UDLAGE) - NOVO
// ----------------------------------------------------------------------
function handleConditionalPage8() {
    const koristiUdlagu = answers['KoristenjeUdlage'] === 'Da';
    const q8Cijena = document.getElementById('q8_cijena_udlage');
    
    if (koristiUdlagu) {
        q8Cijena.classList.remove('hidden');
        toggleRequired(q8Cijena, true); // Pitanje je obavezno
    } else {
        q8Cijena.classList.add('hidden');
        toggleRequired(q8Cijena, false);
    }
}

// ----------------------------------------------------------------------
// UVJETNA LOGIKA ZA STRANICU 9 (PREPORUKA) - NOVO
// ----------------------------------------------------------------------
function handleConditionalPage9() {
    const koristiUdlagu = answers['KoristenjeUdlage'] === 'Da';
    const q9Preporuka = document.getElementById('q9_preporuka');
    
    if (koristiUdlagu) {
        q9Preporuka.classList.remove('hidden');
        // Checkbox polja nisu obavezna po defaultu
        toggleRequired(q9Preporuka, false);
    } else {
        q9Preporuka.classList.add('hidden');
        toggleRequired(q9Preporuka, false);
    }
}


// Globalni slušatelj za sve "Dalje" tipke
nextBtns.forEach(button => {
  button.addEventListener("click", (e) => {
    e.preventDefault();

    const currentForm = e.target.closest('form');
    const currentStep = parseInt(currentForm.dataset.step);
    let nextStep = parseInt(e.target.dataset.nextStep); 
    
    // 1. Validacija forme 
    if (!currentForm.checkValidity()) {
        currentForm.reportValidity();
        return;
    }

    // 2. Pohrani podatke trenutne forme
    const formData = new FormData(currentForm);
    
    currentForm.querySelectorAll('input[type="checkbox"]').forEach(checkbox => {
        if (answers[checkbox.name]) {
             answers[checkbox.name] = [];
        }
    });

    formData.forEach((v, k) => {
        const element = currentForm.querySelector(`[name="${k}"]`);
        
        // Provjerava je li polje skriveno prije spremanja
        if (element && element.closest('.hidden')) {
            return;
        }

        if (element && element.type === 'checkbox') {
            if (!answers[k]) answers[k] = [];
            answers[k].push(v);
        } else if (element && element.type === 'radio') {
             answers[k] = v;
        } else if (element) {
            answers[k] = v;
        }
    });

    // 3. Prijelaz na sljedeći korak s UVJETNIM PRESKAKANJEM
    
    if (answers['KoristenjeUdlage'] === 'Ne') {
        // Ako NE koristi udlagu, preskačemo sve vezano za udlagu.
        if (currentStep === 4) {
             // Sa Stranice 4 skačemo na Stranicu 8 (preskače 5, 6, 7)
             nextStep = 8;
        } 
    }
    
    
    if (nextStep <= totalSteps) {
      goToStep(currentStep, nextStep);
    }
    
    console.log(`Odgovori nakon koraka ${currentStep}:`, answers);
  });
});

// Slušatelj za klizač (Slider update)
comfortSlider?.addEventListener("input", () => {
  comfortValue.textContent = comfortSlider.value;
});

// Slušatelj za zadnju formu (Pošalji)
document.getElementById('page9').addEventListener("submit", async (e) => {
    e.preventDefault();
    
    const currentForm = e.target.closest('form');
    const errorBox = document.getElementById("errorBox");

    errorBox.innerHTML = '';
    
    if (!currentForm.checkValidity()) {
        currentForm.reportValidity();
        return;
    }

    // Pohrani finalne podatke forme 9
    const formData = new FormData(currentForm);
    
    currentForm.querySelectorAll('input[type="checkbox"]').forEach(checkbox => {
        if (answers[checkbox.name]) {
             answers[checkbox.name] = [];
        }
    });

    formData.forEach((v, k) => {
        const element = currentForm.querySelector(`[name="${k}"]`);
        
         if (element && element.type === 'checkbox') {
            if (!answers[k]) answers[k] = [];
            answers[k].push(v);
        } else {
            answers[k] = v;
        }
    });

    // Kod za slanje na backend (Koristi http://localhost:3001/send-email)
    try {
        const payload = answers; 
        
        const submitButton = document.getElementById('finishBtn');
        submitButton.disabled = true;
        submitButton.textContent = "Šaljem...";

        const response = await fetch("https://anketa-server-red.vercel.app/send-email", {
            method: "POST",
            headers: {
                "Content-Type": "application/json"
            },
            body: JSON.stringify(payload)
        });

        const result = await response.json();

        if (response.ok) {
            alert("Email uspješno poslan! Hvala Vam na sudjelovanju.");
            currentForm.reset();
        } else {
            errorBox.innerHTML = `
                <div class="bg-red-500/20 border border-red-500 text-red-300 p-3 rounded-xl mt-4">
                    Greška: ${result.message || 'Nepoznata greška na serveru.'}
                </div>`;
            submitButton.disabled = false;
            submitButton.textContent = "Pošalji";
        }
    } catch (err) {
        console.error("Greška pri dohvaćanju:", err);
        errorBox.innerHTML = `
            <div class="bg-red-500/20 border border-red-500 text-red-300 p-3 rounded-xl mt-4">
                Greška spajanja: Server se ne može dohvatiti. Provjerite vezu ili pokušajte ponovo.
            </div>`;
        const submitButton = document.getElementById('finishBtn');
        submitButton.disabled = false;
        submitButton.textContent = "Pošalji";
    }
});

// Inicijalizacija
if (comfortSlider) {
    comfortValue.textContent = comfortSlider.value;
}
updateProgress(1);

// Prilikom prvog učitavanja, osiguraj da su sva uvjetna polja opcionalna
document.addEventListener('DOMContentLoaded', () => {
    // Page 2: Q3-Q6
    const q2_da_group = document.getElementById('q2_da_group');
    if (q2_da_group) toggleRequired(q2_da_group, false); 
    
    // Page 4: Q3
    const q4_vrsta_ozljede = document.getElementById('q4_vrsta_ozljede');
    if (q4_vrsta_ozljede) toggleRequired(q4_vrsta_ozljede, false);
    
    // Page 5: Sva pitanja su uvjetna
    const usporedbaDetalji = document.getElementById('q5_usporedba_detalji');
    const q5KoristiliObje = document.getElementById('q5_koristili_obje');
    if (usporedbaDetalji) toggleRequired(usporedbaDetalji, false);
    if (q5KoristiliObje) toggleRequired(q5KoristiliObje, false);
    
    // Page 7: Q7
    const q7_komentar_iritacija = document.getElementById('q7_komentar_iritacija');
    if (q7_komentar_iritacija) toggleRequired(q7_komentar_iritacija, false);
    
    // Page 8: Q1
    const q8_cijena_udlage = document.getElementById('q8_cijena_udlage');
    if (q8_cijena_udlage) toggleRequired(q8_cijena_udlage, false); 
    
    // Page 9: Q1
    const q9_preporuka = document.getElementById('q9_preporuka');
    if (q9_preporuka) toggleRequired(q9_preporuka, false);
    
    if (!document.getElementById('page2').classList.contains('hidden')) {
         handleConditionalPage2();
    }
});
</script>

</body>
</html>
